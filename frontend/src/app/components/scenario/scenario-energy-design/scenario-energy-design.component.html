<div class="system-design">
    <app-energy-components
        [components]="components"
        (touchEnd)="touchEnd($event)"
        *ngIf="!isFullscreen"
    />

    <app-energy-drawflow
        class="w-100 h-100 border"
        (showFormModal)="showFormModal($event)"
        (toggleFullScreen)="toggleFullScreen()"
    />
</div>

<app-modal
    *ngIf="
        formModal_info &&
        formModal_info.show &&
        formModal_info.title &&
        formModal_info.id
    "
    [title]="formModal_info.title"
    (closeModal)="closeModal()"
>
    <div modal-form>
        <!-- ports -->
        <div class="row mb-3" *ngIf="formModal_info.id === 'transformer'">
            <div class="col-6">
                <app-order-list
                    label="Inputs"
                    [data]="
                        formModal_info.data.ports
                            ? formModal_info.data.ports.inputs
                            : null
                    "
                    [acceptDuplicate]="false"
                    [fields]="['name', 'num']"
                    #transform_inputs
                />
            </div>

            <div class="col-6">
                <app-order-list
                    label="Outputs"
                    [data]="
                        formModal_info.data.ports
                            ? formModal_info.data.ports.outputs
                            : null
                    "
                    [acceptDuplicate]="false"
                    [fields]="['name', 'num']"
                    #transform_outputs
                />
            </div>
        </div>

        <app-form
            [formData]="formModal_info.formData"
            (onSubmit)="submitFormData()"
            #form
        />
    </div>

    <div modal-actions>
        <span
            class="text-danger"
            style="position: absolute; left: 0; padding-left: 3rem"
            *ngIf="formError.isShow"
        >
            {{ formError.msg }}
        </span>

        <button
            type="submit"
            class="btn btn--success btn--medium"
            (click)="submitFormData()"
        >
            <!-- <span *ngIf="!editMode">Save</span> -->
            <span>{{ formModal_info.action.label }}</span>
        </button>
    </div>
</app-modal>
